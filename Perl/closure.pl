# ********************************************************************************
# クロージャ
# ********************************************************************************

use 5.016;

sub outer {
    my $i = 1;

    return  sub {
        say $i;
        $i++;
    };
}

my $f = outer();

$f->(); # 1
$f->(); # 2
$f->(); # 3


# ********************************************************************************
# 静的ローカル変数としてのクロージャ
# ********************************************************************************

{
    my $count;
    sub count_one { ++$count }
    sub count_so_far { $count }
}

count_one;
count_one;
count_one;

# クロージャなのでアクセス出来ない
# say $count;

say 'count ' . count_so_far;
